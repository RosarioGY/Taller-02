<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/loan-validation/src/main/java/com/nttdata/loanvalidation/controller/LoanEligibilityController.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/loan-validation/src/main/java/com/nttdata/loanvalidation/controller/LoanEligibilityController.java" />
              <option name="originalContent" value="package com.nttdata.loanvalidation.controller;&#10;&#10;import com.nttdata.loanvalidation.model.LoanValidationRequest;&#10;import com.nttdata.loanvalidation.model.LoanValidationResponse;&#10;import org.springframework.web.bind.annotation.*;&#10;&#10;@RestController&#10;@RequestMapping(&quot;/api/loan-eligibility&quot;)&#10;public class LoanEligibilityController {&#10;    @PostMapping&#10;    public LoanValidationResponse validateLoan(@RequestBody LoanValidationRequest request) {&#10;        // Lógica de validación simulada&#10;        return new LoanValidationResponse(true, null);&#10;    }&#10;}&#10;&#10;" />
              <option name="updatedContent" value="package com.nttdata.loanvalidation.controller;&#10;&#10;import com.nttdata.loanvalidation.model.LoanValidationRequest;&#10;import com.nttdata.loanvalidation.model.LoanValidationResult;&#10;import com.nttdata.loanvalidation.model.ReasonType;&#10;import org.springframework.web.bind.annotation.*;&#10;&#10;import java.time.LocalDate;&#10;import java.time.temporal.ChronoUnit;&#10;import java.util.ArrayList;&#10;import java.util.List;&#10;&#10;@RestController&#10;@RequestMapping(&quot;/loan-validations&quot;)&#10;public class LoanEligibilityController {&#10;    @PostMapping&#10;    public LoanValidationResult validateLoan(@RequestBody LoanValidationRequest request) {&#10;        List&lt;ReasonType&gt; reasons = new ArrayList&lt;&gt;();&#10;        double monthlyPayment = 0.0;&#10;        boolean datosInvalidos = false;&#10;&#10;        // Validación de datos&#10;        if (request.getMonthlySalary() &lt; 0.01 || request.getRequestedAmount() &lt; 0.01 || request.getTermMonths() &lt; 1 || request.getTermMonths() &gt; 36) {&#10;            reasons.add(ReasonType.DATOS_INVALIDOS);&#10;            datosInvalidos = true;&#10;        }&#10;&#10;        // Validación de plazo máximo&#10;        if (request.getTermMonths() &gt; 36) {&#10;            reasons.add(ReasonType.PLAZO_MAXIMO_SUPERADO);&#10;        }&#10;&#10;        // Validación de préstamos recientes&#10;        if (request.getLastLoanDate() != null) {&#10;            LocalDate threeMonthsAgo = LocalDate.now().minusMonths(3);&#10;            if (!request.getLastLoanDate().isAfter(threeMonthsAgo)) {&#10;                reasons.add(ReasonType.HAS_RECENT_LOANS);&#10;            }&#10;        }&#10;&#10;        // Cálculo de pago mensual&#10;        if (!datosInvalidos) {&#10;            monthlyPayment = request.getRequestedAmount() / request.getTermMonths();&#10;            // Validaci��n de capacidad&#10;            if (monthlyPayment &gt; request.getMonthlySalary() * 0.5) {&#10;                reasons.add(ReasonType.CAPACIDAD_INSUFICIENTE);&#10;            }&#10;        }&#10;&#10;        boolean eligible = reasons.isEmpty();&#10;        return new LoanValidationResult(eligible, reasons, monthlyPayment);&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/loan-validation/src/main/java/com/nttdata/loanvalidation/model/LoanValidationRequest.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/loan-validation/src/main/java/com/nttdata/loanvalidation/model/LoanValidationRequest.java" />
              <option name="originalContent" value="&#10;    public void setCustomerId(String customerId) {&#10;        this.customerId = customerId;&#10;    }&#10;&#10;    public double getAmount() {&#10;        return amount;&#10;    }&#10;&#10;    public void setAmount(double amount) {&#10;        this.amount = amount;&#10;    }&#10;&#10;    public int getTermMonths() {&#10;        return termMonths;&#10;    }&#10;&#10;    public void setTermMonths(int termMonths) {&#10;        this.termMonths = termMonths;&#10;    }&#10;}&#10;package com.nttdata.loanvalidation.model;&#10;&#10;public class LoanValidationRequest {&#10;    private String customerId;&#10;    private double amount;&#10;    private int termMonths;&#10;&#10;    public LoanValidationRequest() {}&#10;&#10;    public LoanValidationRequest(String customerId, double amount, int termMonths) {&#10;        this.customerId = customerId;&#10;        this.amount = amount;&#10;        this.termMonths = termMonths;&#10;    }&#10;&#10;    public String getCustomerId() {&#10;        return customerId;&#10;    }&#10;&#10;" />
              <option name="updatedContent" value="package com.nttdata.loanvalidation.model;&#10;&#10;import java.time.LocalDate;&#10;&#10;public class LoanValidationRequest {&#10;    private double monthlySalary;&#10;    private double requestedAmount;&#10;    private int termMonths;&#10;    private LocalDate lastLoanDate;&#10;&#10;    public LoanValidationRequest() {}&#10;&#10;    public LoanValidationRequest(double monthlySalary, double requestedAmount, int termMonths, LocalDate lastLoanDate) {&#10;        this.monthlySalary = monthlySalary;&#10;        this.requestedAmount = requestedAmount;&#10;        this.termMonths = termMonths;&#10;        this.lastLoanDate = lastLoanDate;&#10;    }&#10;&#10;    public double getMonthlySalary() { return monthlySalary; }&#10;    public void setMonthlySalary(double monthlySalary) { this.monthlySalary = monthlySalary; }&#10;    public double getRequestedAmount() { return requestedAmount; }&#10;    public void setRequestedAmount(double requestedAmount) { this.requestedAmount = requestedAmount; }&#10;    public int getTermMonths() { return termMonths; }&#10;    public void setTermMonths(int termMonths) { this.termMonths = termMonths; }&#10;    public LocalDate getLastLoanDate() { return lastLoanDate; }&#10;    public void setLastLoanDate(LocalDate lastLoanDate) { this.lastLoanDate = lastLoanDate; }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/loan-validation/src/main/java/com/nttdata/loanvalidation/model/LoanValidationResponse.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/loan-validation/src/main/java/com/nttdata/loanvalidation/model/LoanValidationResponse.java" />
              <option name="originalContent" value="package com.nttdata.loanvalidation.model;&#10;&#10;import java.util.List;&#10;&#10;public class LoanValidationResponse {&#10;    private boolean eligible;&#10;    private List&lt;Reason&gt; reasons;&#10;&#10;    public LoanValidationResponse() {}&#10;&#10;    public LoanValidationResponse(boolean eligible, List&lt;Reason&gt; reasons) {&#10;        this.eligible = eligible;&#10;        this.reasons = reasons;&#10;    }&#10;&#10;    public boolean isEligible() {&#10;        return eligible;&#10;    }&#10;&#10;    public void setEligible(boolean eligible) {&#10;        this.eligible = eligible;&#10;    }&#10;&#10;    public List&lt;Reason&gt; getReasons() {&#10;        return reasons;&#10;    }&#10;&#10;    public void setReasons(List&lt;Reason&gt; reasons) {&#10;        this.reasons = reasons;&#10;    }&#10;}&#10;&#10;" />
              <option name="updatedContent" value="package com.nttdata.loanvalidation.model;&#10;&#10;import java.util.List;&#10;&#10;public class LoanValidationResult {&#10;    private boolean eligible;&#10;    private List&lt;ReasonType&gt; reasons;&#10;    private double monthlyPayment;&#10;&#10;    public LoanValidationResult() {}&#10;&#10;    public LoanValidationResult(boolean eligible, List&lt;ReasonType&gt; reasons, double monthlyPayment) {&#10;        this.eligible = eligible;&#10;        this.reasons = reasons;&#10;        this.monthlyPayment = monthlyPayment;&#10;    }&#10;&#10;    public boolean isEligible() { return eligible; }&#10;    public void setEligible(boolean eligible) { this.eligible = eligible; }&#10;    public List&lt;ReasonType&gt; getReasons() { return reasons; }&#10;    public void setReasons(List&lt;ReasonType&gt; reasons) { this.reasons = reasons; }&#10;    public double getMonthlyPayment() { return monthlyPayment; }&#10;    public void setMonthlyPayment(double monthlyPayment) { this.monthlyPayment = monthlyPayment; }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/loan-validation/src/main/java/com/nttdata/loanvalidation/model/Reason.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/loan-validation/src/main/java/com/nttdata/loanvalidation/model/Reason.java" />
              <option name="originalContent" value="package com.nttdata.loanvalidation.model;&#10;&#10;public class Reason {&#10;    private String code;&#10;    private String message;&#10;&#10;    public Reason() {}&#10;&#10;    public Reason(String code, String message) {&#10;        this.code = code;&#10;        this.message = message;&#10;    }&#10;&#10;    public String getCode() {&#10;        return code;&#10;    }&#10;&#10;    public void setCode(String code) {&#10;        this.code = code;&#10;    }&#10;&#10;    public String getMessage() {&#10;        return message;&#10;    }&#10;&#10;    public void setMessage(String message) {&#10;        this.message = message;&#10;    }&#10;}&#10;&#10;" />
              <option name="updatedContent" value="package com.nttdata.loanvalidation.model;&#10;&#10;// Este modelo ya no es necesario, se elimina." />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/loan-validation/src/main/java/com/nttdata/loanvalidation/model/ReasonType.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/loan-validation/src/main/java/com/nttdata/loanvalidation/model/ReasonType.java" />
              <option name="updatedContent" value="package com.nttdata.loanvalidation.model;&#10;&#10;public enum ReasonType {&#10;    HAS_RECENT_LOANS,&#10;    PLAZO_MAXIMO_SUPERADO,&#10;    CAPACIDAD_INSUFICIENTE,&#10;    DATOS_INVALIDOS&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>